{"name":"Deploy'It - Dockerized","tagline":"Host your own private Heroku, easy ;)","body":"[![GitHub license](https://img.shields.io/github/license/jbox-web/deploy-it-dockerized.svg)](https://github.com/jbox-web/deploy-it-dockerized/blob/master/LICENSE)\r\n\r\n## Installation\r\n\r\nYou will need :\r\n\r\n* Docker\r\n* Docker Registry\r\n\r\nto be installed before installing DeployIt.\r\n\r\n\r\n**1)** First checkout the repository and init submodules :\r\n\r\n```sh\r\nroot# git clone https://github.com/jbox-web/deploy-it-dockerized.git deploy-it\r\nroot# cd deploy-it\r\nroot# git submodule init\r\nroot# git submodule update\r\n```\r\n\r\n**2)** Build Docker base image\r\n\r\n```sh\r\nroot# cd image-base\r\nroot# docker build -t deploy_it:base .\r\n```\r\n\r\n**3)** Create a configuration file called ```deploy-it.env``` with environment variables within :\r\n\r\nYou will need to set your own config for this settings :\r\n\r\nSettings | Format\r\n---------|--------\r\n```<RAILS GENERATED SECRET>```              | Random secret (64 characters)\r\n```<FAYE GENERATED SECRET>```               | Random secret (64 characters)\r\n```<DATABASE PASSWORD>```                   | Database user password\r\n```<DEPLOYIT ACCESS URL>```                 | The url you want to use to access to DeployIt (ex: http://deployit.example.net:5000 or https://deployit.example.net)\r\n```<DEPLOYIT DOMAIN NAME>```                | The default domain name for newly created applications\r\n```<DOCKER PRIVATE REGISTRY DOMAIN NAME>``` | The domaine name of your own Docker Private Registry (private-registry.example.net)\r\n\r\n```sh\r\n## Rails vars\r\nRAILS_ENV=production\r\nRAILS_SECRET=<RAILS GENERATED SECRET>\r\n\r\n## Database config\r\nDB_ADAPTER=mysql2\r\nDB_HOST=db\r\nDB_PORT=3306\r\nDB_NAME=deployit\r\nDB_USER=deployit\r\nDB_PASS=<DATABASE PASSWORD>\r\n\r\n## Redis config\r\nREDIS_HOST=redis\r\nREDIS_PORT=6379\r\n\r\n## DeployIt config\r\n\r\n# Logs\r\nLOG_LEVEL=info\r\nLOG_DIR=/home/deploy-it/log\r\n\r\n# Faye server / Async events\r\nACCESS_URL=<DEPLOYIT ACCESS URL>\r\nFAYE_SECRET=<FAYE GENERATED SECRET>\r\n\r\n# DeployIt authentication server\r\nAUTHENTICATION_SERVER=http://web:80\r\n\r\n# SSH authorized_keys file\r\nSSH_CONFIG_FILE=/home/deploy-it/.ssh/authorized_keys\r\n\r\n# DeployIt domain name\r\nACCESS_DOMAIN_NAME=<DEPLOYIT DOMAIN NAME>\r\n\r\n# Private Docker Registry\r\nDOCKER_REGISTRY=<DOCKER PRIVATE REGISTRY DOMAIN NAME>\r\n\r\n# DeployIt directories\r\nAPPLICATIONS_CLONES_DIR=/data/applications-clones\r\nAPPLICATIONS_REPOS_DIR=/data/applications-repositories\r\nAPPLICATIONS_DATAS_DIR=/data/deploy-it/applications-datas\r\n```\r\n\r\n**4)** Edit ```docker-compose.yml``` file and set  ```<DATABASE PASSWORD>``` and ```<DATABASE ROOT PASSWORD>``` variables\r\n\r\n**5)** Launch ```install.sh``` script :\r\n\r\n```sh\r\nroot# ./install.sh\r\n```\r\n\r\nThis will trigger Docker Compose and will build these DeployIt images/containers :\r\n\r\n* Web\r\n* Sidekiq\r\n* SSH\r\n* MySQL\r\n* Redis\r\n","google":"UA-36504891-3","note":"Don't delete this file! It's used internally to help with page regeneration."}